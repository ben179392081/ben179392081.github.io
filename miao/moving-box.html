<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  div {
    width: 20px;
    height: 20px;
    background-color: skyblue;
    position: absolute;
  }
   section {
    width: 20px;
    height: 20px;
    background-color: red;
    position: absolute;
  }
</style>

<body>
  <div style="left:2px;top:20px"></div>
  <section style="left:20px;top:40px"></section>
  <script>
    var div = document.querySelector('div')
    var left = false
    var right = false
    var upPress = false
    var downPress = false
    var v = 0
    var vy = 0
    document.addEventListener('keydown', function (e) {
      if (e.key == "ArrowRight") {
        v = 1
        right = true
      }
      if (e.key == "ArrowLeft") {
        v = -1
        left = true
      }
      if (e.key == "ArrowUp") {
        console.log(2);
        vy = -1
        upPress = true
      }
      if (e.key == "ArrowDown") {
        console.log(1);
        vy = 1
        downPress = true
      }
    })
    document.addEventListener('keyup', function (e) {

      if (e.key == 'ArrowRight') {
        right = false
        if (left) {
          v = -1
        } else {
          v = 0
        }
      }
      if (e.key == 'ArrowLeft') {
        left = false
        if (right) {
          console.log(1)
          v = 1
        } else {
          v = 0
        }
      }
      if (e.key == 'ArrowUp') {
        upPress = false
        if (downPress) {
          vy = 1
        } else {
          vy = 0
        }
      }
      if (e.key == 'ArrowDown') {
        downPress = false
        if (upPress) {
          vy = -1
        } else {
          vy = 0
        }
      }
    })
    var section = document.querySelector('section')
      var left2 = false
      var right2 = false
      var upPress2 = false
      var downPress2 = false
      var vx2 = 0
      var vy2 = 0
      document.addEventListener('keydown', function (e) {
        if (e.key == 'd') {
          right2 = true
          vx2 = 1
        }
        if (e.key == 'a') {
          left2 = true
          vx2 = -1
        }
        if (e.key == 'w') {
          upPress2 = true
          vy2 = -1
        }
        if (e.key == 's') {
          downPress2 = true
          vy2 = 1
        }
      })
      document.addEventListener('keyup', function (e) {
        if (e.key == 'd') {
          right2 = false
          if (left2) {
            vx2 = -1
          } else {
            vx2 = 0
          }
        }
        if (e.key == 'a') {
          left2 = false
          if (right2) {
            vx2 = 1
          } else {
            vx2 = 0
          }
        }
        if (e.key == 'w') {
          upPress2 = false
          if (downPress2) {
            vy2 = 1
          } else {
            vy2 = 0
          }
        }
        if (e.key == 's') {
          downPress2 = false
          if (upPress2) {
            console.log(2)
            vy2 = -1
          } else {
            vy2 = 0
          }
        }
      })
    requestAnimationFrame(function move() {
      div.style.left = parseInt(div.style.left) + v + 'px';
      div.style.top = parseInt(div.style.top) + vy + 'px';
      section.style.left = parseInt(section.style.left) + vx2 + 'px';
      section.style.top = parseInt(section.style.top) + vy2 + 'px';
      requestAnimationFrame(move)
    })
    window.addEventListener('blur', function (e) {
      v = 0
      vy = 0
    })
  </script>

</body>

</html>